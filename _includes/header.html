<header class="px-4 sm:px-6 lg:px-8 xl:px-32 py-4 top-0 sticky md:static z-10 dark:text-white z-100 bg-gradient-to-b from-brand-gold/5 to-transparent transition-all duration-300" id="main-header">
	<div class="flex items-center justify-between max-w-7xl mx-auto">
		<div class="flex items-center space-x-4 lg:pt-20 md:pt-8 md:pb-4">
			<h1 class="lg:text-lg xl:text-xl tracking-widest uppercase">
				<a class="md:-ml-4 md:-mt-4 md:p-4 hover:bg-brand-coral/10 hover:text-brand-coral dark:hover:bg-brand-dark-900/50 rounded-md stroke-brand-dark hover:stroke-brand-coral dark:stroke-white/50 flex items-center space-x-3 text-brand-dark hover:text-brand-coral transition-colors dark:text-white dark:hover:stroke-brand-coral" href="{{ site.url }}">
				{% include logo.html class="size-8 opacity-80 md:opacity-100 md:size-12 mr-4" %}
				Amalgam Capital
				</a>
			</h1>
		</div>
		<!-- Mobile menu button -->
		<button type="button" class="print:hidden md:hidden inline-flex items-center justify-center p-2 rounded-md hover:bg-brand-coral/50 hover:text-brand-coral dark:hover:bg-brand-dark-900/50 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 z-110" aria-controls="mobile-menu" aria-expanded="false" onclick="toggleMobileMenu()">
			<span class="sr-only">Open main menu</span>
			<!-- Icon when menu is closed -->
			<svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
			</svg>

		</button>
		<!-- Desktop navigation -->
		<nav class="hidden md:block print:hidden">
			<ul class="flex items-center justify-end text-xs uppercase mb-6 transition-opacity duration-300">
				{% for item in site.data.navigation.small-navigation %}
				<li><a class="hover:bg-brand-coral/10 hover:text-brand-coral opacity-75 hover:opacity-100  dark:hover:bg-brand-dark-900/50 rounded-md px-4 py-2" href="{{ site.url }}{{ item.url }}">{{ item.title }}</a></li>
				{% endfor %}
			</ul>
			<ul class="flex items-center py-2">
				{% for item in site.data.navigation.main-navigation %}
				<li><a class="p-4 hover:bg-brand-coral/10 hover:text-brand-coral dark:hover:bg-brand-dark-900/50 rounded-md" href="{{ site.url }}{{ item.url }}">{{ item.title }}</a></li>
				{% endfor %}
			</ul>
		</nav>
	</div>
	<!-- Mobile menu -->
</header>
<div class="hidden md:hidden print:hidden fixed top-0 inset-0 bg-white/50 dark:bg-brand-dark-900/50 backdrop-blur-xl z-50" id="mobile-menu">
	<div class="px-4 sm:px-6 lg:px-8 xl:px-32 py-4">
		<div class="flex items-center justify-between max-w-7xl mx-auto">
			<div class="flex items-center space-x-4 lg:pt-20 md:pt-8 md:pb-4">
				<h1 class="lg:text-lg xl:text-xl tracking-widest uppercase">
					<a class="cursor-pointer stroke-brand-dark hover:stroke-brand-coral dark:stroke-white/50 flex items-center space-x-3 text-brand-dark hover:text-brand-coral transition-colors dark:text-white dark:hover:stroke-brand-coral" href="{{ site.url }}">
					{% include logo.html class="size-8 opacity-80 md:opacity-100 md:size-12 mr-4" %}
					Amalgam Capital
					</a>
				</h1>
			</div>
			<!-- Mobile menu close button -->
			<button type="button" class="print:hidden md:hidden inline-flex items-center justify-center p-2 rounded-md hover:bg-brand-coral/50 hover:text-brand-coral dark:hover:bg-brand-dark-900/50 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 z-110" aria-controls="mobile-menu" aria-expanded="true" onclick="toggleMobileMenu()">
				<span class="sr-only">Close main menu</span>
				<!-- Close icon -->
				<svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
				</svg>
			</button>
		</div>
	</div>
	<div class="h-full flex flex-col px-4 sm:px-6">
		<div class="max-w-7xl mx-auto w-full">
			<ul class="flex flex-col">
				{% for item in site.data.navigation.mobile-navigation %}
				<li><a class="cursor-pointer w-full block py-4 border-t border-gray-200 dark:border-gray-800 text-2xl hover:text-brand-coral transition-colors {% if item.main-cta-title %}font-semibold{% endif %}" href="{{ site.url }}{{ item.url }}">{{ item.title }}{{ item.main-cta-title }}</a></li>
				{% endfor %}
			</ul>
		</div>
	</div>
</div>

<script>
function toggleMobileMenu() {
	const mobileMenu = document.getElementById('mobile-menu');
	const menuButton = document.querySelector('[aria-controls="mobile-menu"]');
	const menuIcons = menuButton.querySelectorAll('svg');
	
	mobileMenu.classList.toggle('hidden');
	menuIcons.forEach(icon => icon.classList.toggle('hidden'));
	
	const isExpanded = mobileMenu.classList.contains('hidden') ? 'false' : 'true';
	menuButton.setAttribute('aria-expanded', isExpanded);
}

// Add scroll event listener to handle backdrop blur on mobile only
window.addEventListener('scroll', function() {
    if (window.innerWidth < 768) { // Only run on mobile (screen width < 768px)
        const header = document.getElementById('main-header');
        if (window.scrollY > 0) {
            header.classList.add('backdrop-blur-xl');
        } else {
            header.classList.remove('backdrop-blur-xl');
        }
    }
});
</script>